{"version":3,"sources":["scripts/main.js"],"names":["result","play","document","querySelector","fieldRows","querySelectorAll","gameScore","gameGround","changingCellInfo","i","j","className","textContent","cancellation","randomRow","randomV","Math","floor","random","randomColumn","row","randomValue","addNewValue","column","updateInfo","summZero","classList","toggle","moveCellsUp","count","moveCellsDown","moveCellsLeft","moveCellsRight","keyPressed","key","countUp","countDown","countLeft","countRight","addEventListener","add","remove","e","startPointX","startPointY","gameField","moved","touch","preventDefault","changedTouches","pageX","pageY","move","offsetWidth","offsetHeight","setTimeout"],"mappings":"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","file":"main.3803cb42.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nlet result = 0;\n\nconst play = document.querySelector('.start');\nconst fieldRows = document.querySelectorAll('.field-row');\nconst gameScore = document.querySelector('.game-score');\n\nconst gameGround = [\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n  [0, 0, 0, 0],\n];\n\nfunction changingCellInfo() {\n  for (let i = 0; i < 4; i++) {\n    for (let j = 0; j < 4; j++) {\n      fieldRows[i].querySelectorAll('.field-cell')[j]\n        .className = `field-cell${gameGround[i][j]\n          ? ` field-cell--${gameGround[i][j]}`\n          : ''}`;\n\n      fieldRows[i].querySelectorAll('.field-cell')[j]\n        .textContent = gameGround[i][j]\n          ? gameGround[i][j]\n          : '';\n    }\n  }\n}\n\nfunction cancellation() {\n  for (let i = 0; i < 4; i++) {\n    for (let j = 0; j < 4; j++) {\n      gameGround[i][j] *= 0;\n    }\n  }\n}\n\nfunction randomRow() {\n  const randomV = Math.floor(Math.random() * 4);\n\n  for (let i = 0; i < 4; i++) {\n    if (gameGround[randomV][i] === 0) {\n      return randomV;\n    }\n  }\n\n  return randomRow();\n}\n\nfunction randomColumn(row) {\n  const randomV = Math.floor(Math.random() * 4);\n\n  if (gameGround[row][randomV] === 0) {\n    return randomV;\n  }\n\n  return randomColumn(row);\n}\n\nfunction randomValue() {\n  if (Math.floor(Math.random() * 10) === 9) {\n    return 4;\n  } else {\n    return 2;\n  }\n}\n\nfunction addNewValue() {\n  const row = randomRow();\n  const column = randomColumn(row);\n\n  if (gameGround[row][column] === 0) {\n    gameGround[row][column] += randomValue();\n  }\n}\n\nfunction updateInfo() {\n  let summZero = 0;\n\n  for (let i = 0; i < 4; i++) {\n    for (let j = 0; j < 4; j++) {\n      if (gameGround[i][j] === 2048) {\n        document.querySelector('.message-win')\n          .classList\n          .toggle('hidden', false);\n      }\n\n      if (gameGround[i][j] === 0) {\n        summZero++;\n      }\n    }\n  }\n\n  if (summZero === 0) {\n    for (let i = 0; i < 3; i++) {\n      for (let j = 0; j < 4; j++) {\n        if (gameGround[i][j] === gameGround[i + 1][j]) {\n          ++summZero;\n        }\n      }\n    }\n\n    for (let i = 0; i < 4; i++) {\n      for (let j = 0; j < 3; j++) {\n        if (gameGround[i][j] === gameGround[i][j + 1]) {\n          ++summZero;\n        }\n      }\n    }\n\n    if (summZero === 0) {\n      document.querySelector('.message-lose').classList.toggle('hidden', false);\n    }\n  }\n\n  gameScore.textContent = `${result}`;\n}\n\nfunction moveCellsUp() {\n  let count = 0;\n\n  for (let i = 3; i > 0; i--) {\n    for (let j = 0; j < 4; j++) {\n      if (gameGround[i - 1][j] === 0\n        && gameGround[i][j] !== 0) {\n        gameGround[i - 1][j] += gameGround[i][j];\n        gameGround[i][j] *= 0;\n        count++;\n      }\n    }\n  }\n\n  return count;\n}\n\nfunction moveCellsDown() {\n  let count = 0;\n\n  for (let i = 0; i < 3; i++) {\n    for (let j = 0; j < 4; j++) {\n      if (gameGround[i + 1][j] === 0\n        && gameGround[i][j] !== 0) {\n        gameGround[i + 1][j] += gameGround[i][j];\n        gameGround[i][j] *= 0;\n        count++;\n      }\n    }\n  }\n\n  return count;\n}\n\nfunction moveCellsLeft() {\n  let count = 0;\n\n  for (let i = 0; i < 4; i++) {\n    for (let j = 3; j > 0; j--) {\n      if (gameGround[i][j - 1] === 0\n        && gameGround[i][j] !== 0) {\n        gameGround[i][j - 1] += gameGround[i][j];\n        gameGround[i][j] *= 0;\n        count++;\n      }\n    }\n  }\n\n  return count;\n}\n\nfunction moveCellsRight() {\n  let count = 0;\n\n  for (let i = 0; i < 4; i++) {\n    for (let j = 0; j < 3; j++) {\n      if (gameGround[i][j + 1] === 0 && gameGround[i][j] !== 0) {\n        gameGround[i][j + 1] += gameGround[i][j];\n        gameGround[i][j] *= 0;\n        count++;\n      }\n    }\n  }\n\n  return count;\n}\n\nfunction keyPressed(key) {\n  switch (key) {\n    case 'ArrowUp':\n      let countUp = 0;\n\n      countUp += moveCellsUp();\n      countUp += moveCellsUp();\n      countUp += moveCellsUp();\n\n      for (let i = 0; i < 3; i++) {\n        for (let j = 0; j < 4; j++) {\n          if (gameGround[i][j] === gameGround[i + 1][j]\n            && gameGround[i][j] !== 0) {\n            gameGround[i][j] *= 2;\n            gameGround[i + 1][j] *= 0;\n            result += gameGround[i][j];\n            countUp++;\n\n            countUp += moveCellsUp();\n            countUp += moveCellsUp();\n          }\n        }\n      }\n\n      if (countUp === 0) {\n        updateInfo();\n        break;\n      }\n\n      addNewValue();\n      changingCellInfo();\n      updateInfo();\n      break;\n\n    case 'ArrowDown':\n      let countDown = 0;\n\n      countDown += moveCellsDown();\n      countDown += moveCellsDown();\n      countDown += moveCellsDown();\n\n      for (let i = 3; i > 0; i--) {\n        for (let j = 0; j < 4; j++) {\n          if (gameGround[i][j] === gameGround[i - 1][j]\n            && gameGround[i][j] !== 0) {\n            gameGround[i][j] *= 2;\n            gameGround[i - 1][j] *= 0;\n            result += gameGround[i][j];\n            countDown++;\n\n            countDown += moveCellsDown();\n            countDown += moveCellsDown();\n          }\n        }\n      }\n\n      if (countDown === 0) {\n        updateInfo();\n        break;\n      }\n\n      addNewValue();\n      changingCellInfo();\n      updateInfo();\n      break;\n\n    case 'ArrowLeft':\n      let countLeft = 0;\n\n      countLeft += moveCellsLeft();\n      countLeft += moveCellsLeft();\n      countLeft += moveCellsLeft();\n\n      for (let i = 0; i < 4; i++) {\n        for (let j = 0; j < 3; j++) {\n          if (gameGround[i][j] === gameGround[i][j + 1]\n            && gameGround[i][j] !== 0) {\n            gameGround[i][j] *= 2;\n            gameGround[i][j + 1] *= 0;\n            result += gameGround[i][j];\n            countLeft++;\n\n            countLeft += moveCellsLeft();\n            countLeft += moveCellsLeft();\n          }\n        }\n      }\n\n      if (countLeft === 0) {\n        updateInfo();\n        break;\n      }\n\n      addNewValue();\n      changingCellInfo();\n      updateInfo();\n      break;\n\n    case 'ArrowRight':\n      let countRight = 0;\n\n      countRight += moveCellsRight();\n      countRight += moveCellsRight();\n      countRight += moveCellsRight();\n\n      for (let i = 0; i < 4; i++) {\n        for (let j = 3; j > 0; j--) {\n          if (gameGround[i][j] === gameGround[i][j - 1]\n            && gameGround[i][j] !== 0) {\n            gameGround[i][j] *= 2;\n            gameGround[i][j - 1] *= 0;\n            result += gameGround[i][j];\n            countRight++;\n\n            countRight += moveCellsRight();\n            countRight += moveCellsRight();\n          }\n        }\n      }\n\n      if (countRight === 0) {\n        updateInfo();\n        break;\n      }\n\n      addNewValue();\n      changingCellInfo();\n      updateInfo();\n      break;\n  }\n}\n\nplay.addEventListener('click', () => {\n  play.classList.add('restart');\n  play.classList.remove('start');\n  play.textContent = 'Restart';\n  result = 0;\n\n  document.querySelector('.message-start').classList.toggle('hidden', true);\n  document.querySelector('.message-lose').classList.toggle('hidden', true);\n  document.querySelector('.message-win').classList.toggle('hidden', true);\n\n  cancellation();\n  addNewValue();\n  changingCellInfo();\n  updateInfo();\n});\n\ndocument.addEventListener('keydown', (e) => {\n  keyPressed(e.key);\n});\n\n// Exp\nconst gameField = document.querySelector('.game-field');\n\nlet startPointX;\nlet startPointY;\nlet moved = false;\n\nfunction touch(e) {\n  e.preventDefault();\n\n  startPointX = e.changedTouches[0].pageX;\n  startPointY = e.changedTouches[0].pageY;\n}\n\nfunction move(e) {\n  if (moved) {\n    return;\n  }\n\n  e.preventDefault();\n\n  if (e.changedTouches[0].pageX > startPointX + gameField.offsetWidth / 4) {\n    keyPressed('ArrowRight');\n\n    moved = true;\n  }\n\n  if (e.changedTouches[0].pageX < startPointX - gameField.offsetWidth / 4) {\n    keyPressed('ArrowLeft');\n\n    moved = true;\n  }\n\n  if (e.changedTouches[0].pageY < startPointY - gameField.offsetHeight / 4) {\n    keyPressed('ArrowUp');\n\n    moved = true;\n  }\n\n  if (e.changedTouches[0].pageY > startPointY + gameField.offsetHeight / 4) {\n    keyPressed('ArrowDown');\n\n    moved = true;\n  }\n}\n\ngameField.addEventListener('touchmove', move);\ngameField.addEventListener('touchstart', touch);\n\ngameField.addEventListener('touchend', () => {\n  setTimeout(() => {\n    moved = !moved;\n  }, 200);\n});\n"]}